# System Architecture (v1.0)
**Date:** 2026-02-17
**Author:** VibeAlgoLab

## 1. Architecture Overview
This project follows a **Local-First Architecture**. Data processing (Python) and visualization (Next.js) are loosely coupled via the local file system (JSON).

## 2. Data Flow Diagram
```mermaid
graph TD
    subgraph "External Data Sources"
        YF[Yahoo Finance API]
        Gemini[Google Gemini API]
    end

    subgraph "Backend (Python)"
        MA[macro_analyzer.py]
        Utils[utils/gemini_utils.py]
        
        MA -->|Fetch Data| YF
        MA -->|Request Analysis| Utils
        Utils -->|Prompt| Gemini
        Gemini -->|Response| Utils
        Utils -->|Process| MA
    end

    subgraph "Data Storage (Local JSON)"
        MA -->|Save| JSON1[macro_analysis.json]
        MA -->|Save| JSON2[sector_heatmap.json]
        MA -->|Save| JSON3[portfolio_risk.json]
    end

    subgraph "Frontend (Next.js)"
        Page[App Router Page]
        API[API Route Handler]
        
        Page -->|Fetch| API
        API -->|Read| JSON1
        API -->|Read| JSON2
        API -->|Read| JSON3
    end

    User((User)) -->|View Dashboard| Page
```

## 3. Key Component Interaction
1.  **Macro Analysis:** `macro_analyzer.py` collects data from external APIs.
2.  **AI Insight:** Gemini API generates a market summary based on collected data.
3.  **Visualization:** Next.js reads stored JSON files and renders components like `RichText` and `Heatmap`.

---
*This diagram helps visualize the entire system structure at a glance.*
